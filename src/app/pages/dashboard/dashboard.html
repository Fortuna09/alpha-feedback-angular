<div class="dashboard-container">
    <h1>Dashboard de Feedbacks</h1>

    <div class="charts-grid" *ngIf="!isLoading && feedbacks.length > 0">

        <div class="chart-container">
            <div class="chart-header">
                <h3>Notas ao Longo do Tempo</h3>
                <div class="filters">
                    <button [class.active]="activeFilter === 'week'" (click)="setFilter('week')">7d</button>
                    <button [class.active]="activeFilter === 'month'" (click)="setFilter('month')">30d</button>
                    <button [class.active]="activeFilter === 'year'" (click)="setFilter('year')">1 Ano</button>
                </div>
            </div>

            <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="lineChartType">
            </canvas>
        </div>

        <div class="chart-container">
            <h3>Distribuição das Notas</h3>
            <canvas baseChart [data]="doughnutChartData" [type]="'doughnut'">
            </canvas>
        </div>

    </div>


    <div *ngIf="isLoading" class="loading-message">
        Carregando feedbacks...
    </div>

    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>E-mail</th>
                <th>Nota</th>
                <th>Mensagem</th>
                <th>Data</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let feedback of feedbacks">
                <td>{{ feedback.name }}</td>
                <td>{{ feedback.email }}</td>
                <td>{{ feedback.rating }} / 5</td>
                <td>{{ feedback.message }}</td>
                <td>{{ feedback.createdAt | date:'dd/MM/yyyy' }}</td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="!isLoading && feedbacks.length === 0" class="no-data-message">
        Nenhum feedback encontrado.
    </div>
</div>